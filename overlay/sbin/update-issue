#!/bin/sh
# Generate /etc/issue with MaculaOS banner
# Using simple ASCII without color codes for VGA compatibility

. /etc/os-release

cat > /etc/issue << 'BANNER'

    o-------o
   /|       |\        __  __    _    ____ _   _ _        _        ___  ____
  o-+--o----+-o     |  \/  |  / \  / ___| | | | |      / \      / _ \/ ___|
   \|\ | /| /       | |\/| | / _ \| |   | | | | |     / _ \    | | | \___ \
    o--O--o         | |  | |/ ___ \ |___| |_| | |___ / ___ \   | |_| |___) |
   /|  |  |\        |_|  |_/_/   \_\____|\___/|_____/_/   \_\   \___/|____/
  o----o----o
                    Decentralized Edge Computing Platform

BANNER

printf '  %s - Kernel \\r on \\m (\\l)\n\n' "$PRETTY_NAME" >> /etc/issue

NICS=$(ip -br addr show 2>/dev/null | grep -E -v '^(lo|flannel|cni|veth|docker|br-)' | head -3)
if [ -n "$NICS" ]; then
    printf '  Network:\n%s\n\n' "$NICS" >> /etc/issue
fi

printf '  Login: macula / macula\n\n' >> /etc/issue
